{% extends 'base.html' %}


{% block content %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Parent Patrol Page</title>
    <script>
function myFunction(id) {

    if (document.getElementById("b_"+id).textContent == "Close"){
        document.getElementById("b_"+id).textContent = "Show Summary";
        document.getElementById(id).style.display = "none";
    }
    else{
       document.getElementById("b_"+id).textContent = "Close";
       document.getElementById(id).style.display = "";
    }

   }

    </script>
</head>
<body>
{#   <link rel="stylesheet" href="/static/style_back_all.css">#}
<br>
		<div class="row">
			<div class="col-md">
				<div class="card card-body" id="general">
					<h5>List of patrols:</h5>
				</div>
				<div class="card card-body" id="general">
<!--	sort is here-->
					<th><a href="{{ parent_patrol }}?sort=Priority">Sort By Priority </a></th>
					<table class="table">
						<tr>
							<th>Title</th>
							<th>Manager</th>
							<th>Status</th>
							<th>Location</th>
                            <th>Start Time</th>
							<th>End Time</th>
							<th>Priority</th>
							<th>Participants Needed</th>

						</tr>
                        <tr>
							<th>Active Patrols</th>
						</tr>
                        {% for patrol in activePatrols %}
							<tr>
                                <td>
                                <a href="{% url 'patrol_page' patrol.pk %}" style="color:#0A0000; font-weight:500">
                                {{ patrol.title }}
                                </a>
                                </td>
                                <td>{{patrol.manager}}</td>
                                <td>{{patrol.status}}</td>
                                <td>{{patrol.location}}</td>
                                <td>{{patrol.start_time}}</td>
                                <td>{{patrol.end_time}}</td>
                                <td>{{patrol.priority}}</td>
                                <td>{{patrol.participants_needed}}</td>
							</tr>
						{% endfor %}
                        <tr>
							<th>Archive Patrols</th>
						</tr>
                        {% for patrol in donePatrols %}
							<tr>
								<td>{{patrol.title}}</td>
								<td>{{patrol.manager}}</td>
								<td>{{patrol.status}}</td>
								<td>{{patrol.location}}</td>
								<td>{{patrol.start_time}}</td>
								<td>{{patrol.end_time}}</td>
								<td>{{patrol.priority}}</td>
								<td>{{patrol.participants_needed}}</td>
                                {% if user.is_superuser %}
                                    <td><button id="b_{{ patrol.id }}" onclick="myFunction({{ patrol.id }})">Show Summary</button></td>
                                    <tr id="{{ patrol.id }}" style="display: none">
                                        <td>
                                            <h5>Summary:</h5>
                                            {{ patrol.description }}
                                        </td>
                                    </tr>
                                {% endif %}
							</tr>
						{% endfor %}

					</table>
				</div>
			</div>

		</div>

	<style>
	        #logo{
		}
		#general{
		background-color: #D3D3D3;
		}
		body{
			background-color: #7CD1E0;
		}
	</style>
</body>
</html>
{% endblock %}
